!function(e,o){function n(e){if("string"==typeof e&&(e=document.querySelector(e)),o.os.ejs||o.os.dd){var n=e;n.classList.remove("mui-scroll-wrapper");var t=n.querySelector(".mui-scroll");t&&t.classList.remove("mui-scroll")}}function t(e){if(null==e||"string"!=typeof e)return null;var o,n=document.createElement("div"),t=document.createDocumentFragment();for(n.innerHTML=e;o=n.firstChild;)t.appendChild(o);return t}function l(){var e=0;return e="CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight}function u(){var e=0,o=0,n=0;return document.body&&(o=document.body.scrollTop||0),document.documentElement&&(n=document.documentElement.scrollTop||0),e=o>n?o:n}function i(){var e=0,o=0,n=0;return document.body&&(o=document.body.scrollHeight),document.documentElement&&(n=document.documentElement.scrollHeight),e=o-n>0?o:n}function s(e){e=o.extend(!0,{},h,e);var t=this,l=e.container;t.loadingUp=!1,t.finished=!1,t.options=e,"string"==typeof l&&(l=document.querySelector(l)),t.elem=l,t.elem.classList.add("pulltorefresh-native-type"),c(),t.options.down&&(o.os.dd?dd.ui.pullToRefresh.enable({onSuccess:function(){t.options.down.callback&&t.options.down.callback()},onFail:function(){dd.ui.pullToRefresh.stop()}}):ejs.nativeUI?ejs.nativeUI.pullToRefresh.enable(function(){t.options.down.callback&&t.options.down.callback()}):ejs.ui.pullToRefresh.enable({success:function(){t.options.down.callback&&t.options.down.callback()},error:function(){ejs.ui.pullToRefresh.stop()}})),n(t.elem||"#pullrefresh")}function c(){var e=0,o=0,n=0,t=document.body,s=d?"touchstart":"mousedown";t.addEventListener(s,function(l){var u;u=d?l.touches[0]:l,e=Number(u.pageX),o=Number(u.pageY),n=t.scrollTop,m=!0});var c=d?"touchend":"mouseup";t.addEventListener(c,function(e){m=!1,f=!1});var p=d?"touchmove":"mousemove";t.addEventListener(p,function(e){var l;l=d?e.touches[0]:e;var u=(Number(l.pageX),Number(l.pageY));m&&(u-o>30&&0==t.scrollTop&&(f||(console.log("PullDown"),f=!0)),o-u>100&&n==t.scrollTop&&(a.loadingUp||a.finished||a.options.up&&(r(!0),a.options.up.callback&&a.options.up.callback())))});var h=function(){var e=u();document.getElementById("sliderSegmentedControl");e+l()===i()&&(a.loadingUp||a.finished||a.options.up&&(r(!0),a.options.up.callback&&a.options.up.callback()))};document.onscroll=h}function r(e){var o=a.elem;if(o)if(e){if(!a.loadingUp){var n=a.options.up.contentrefresh||"正在加载...";v=v.replace("{{contentrefresh}}",n),o.appendChild(t(v)),a.loadingUp=!0}}else if(a.loadingUp){var l=o.querySelector(".mui-pull-bottom-tips");l&&l.parentNode.removeChild(l),a.loadingUp=!1}}function p(e){return a?a:(a=new s(e),e.up&&e.up.auto&&a.pullupLoading(),a)}var a,d="ontouchend"in document,m=!1,f=!1,h={down:{callback:o.noop},up:{auto:!1,show:!0,contentrefresh:"正在加载...",callback:o.noop},element:"#pullrefresh"},v='<div class="mui-pull-bottom-tips mui-pull-bottom-tips2"><i class="mui-spinner"></i><span class="mui-pull-loading">{{contentrefresh}}</span></div>';s.prototype.pullupLoading=function(){a.options.up&&(r(!0),a.options.up.callback&&a.options.up.callback())},s.prototype.endPullUpToRefresh=function(e){e&&(this.finished=!0),a.options.up&&r(!1)},s.prototype.endPullDownToRefresh=function(){o.os.dd?dd.ui.pullToRefresh.stop():o.os.ejs&&(ejs.nativeUI?ejs.nativeUI.pullToRefresh.stop():ejs.ui.pullToRefresh.stop())},s.prototype.refresh=function(e){this.finished=!1},o.namespace("skin.natives",p)}({},PullToRefreshTools);